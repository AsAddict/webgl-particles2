<!DOCTYPE html>
<html>
<head>
    <title>Test</title>
</head>
<body>
</body>

<script type="text/javascript" src="js/lib/jquery-2.1.3.min.js"></script>
<script type="text/javascript" src="js/lib/three70.js"></script>
<script type="text/javascript" src="js/lib/CopyShader.js"></script>
<script type="text/javascript" src="js/src/Utils.js"></script>
<script type="text/javascript" src="js/src/ShaderPass.js"></script>
<script type="text/javascript" src="js/src/UVMapper.js"></script>
<script type="text/javascript" src="js/src/UVMapAnimator.js"></script>
<script type="text/javascript" src="js/src/shaders/UVMapShader.js"></script>

<script type="text/javascript">

var renderer = new THREE.WebGLRenderer({
    alpha: false,
    depth: true,
    stencil: false,
});
renderer.setSize( window.innerWidth, window.innerHeight );
renderer.autoClear = false;
renderer.setClearColor(0x888888, 1);
document.body.appendChild( renderer.domElement );

var scene = new THREE.Scene();
var camera = new THREE.PerspectiveCamera(45, window.innerWidth/window.innerHeight, 1, 10);
camera.position.z = 5;

var material = new THREE.MeshBasicMaterial( { color: 0xff0000, wireframe: true } );
// scene.add(new THREE.Mesh(
//     new THREE.SphereGeometry(1),
//     material
// ));
// renderer.clear();
// renderer.render(scene, camera);

var uvAnim = new UVMapAnimator(renderer, "models/animals.js", 512);

var copyPass = new ShaderPass(THREE.CopyShader);
copyPass.material.uniforms.tDiffuse.value = uvAnim.target;

var prevTime = Date.now();

function update() {
    var time = Date.now();
    uvAnim.update(time-prevTime);
    prevTime = time;

    // mesh.rotation.y += 0.01;

    copyPass.render(renderer);

    // renderer.clear();
    // renderer.render(scene, camera);

    requestAnimationFrame(update);
}

</script>

</html>